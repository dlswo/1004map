<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>지도 생성하기</title>

</head>
<body>
<!-- 지도를 표시할 div 입니다 -->
<div id="map" style="width:100%;height:50vh;"></div>

<style>
    .wrapper {
        display: flex;
        width: 100%;
        height: 50vh;
        justify-content: center;
        align-items: center;
        background-color: #67f3ff;
    }
    .listUL{
        list-style: none;
        color: white;
        font-size: 3em;
    }
    .listUL li{
        border: 1px solid #747fff;
        text-align: center;
    }
</style>

<div class="wrapper">
    <ul class="listUL">

    </ul>
</div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=95b526f7c2c8c50e0c00f16777a6827a"></script>
<script>
    var mapContainer = document.getElementById('map'), // 지도를 표시할 div
        mapOption = {
            center: new daum.maps.LatLng(37.570404,126.984815), // 지도의 중심좌표
            level: 3 // 지도의 확대 레벨
        };

    // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
    var map = new daum.maps.Map(mapContainer, mapOption);


    // 마커가 지도 위에 표시되도록 설정합니다
    // marker.setMap(map);
</script>

<script>
    var arr = [
        {title:'고기팩토리', lat : 37.569820, lng : 126.986001},
        {title:'갓덴스시', lat : 37.569081, lng : 126.985591},
        {title:'코다차야', lat : 37.569949, lng : 126.985049},
        {title:'롯데리아', lat : 37.569857, lng : 126.984923},
        {title:'초밥의신부타', lat : 37.569440, lng : 126.987367},
        {title:'청진식당', lat : 37.570515, lng : 126.985710},
        {title:'에머이', lat : 37.570031, lng : 126.984601},
    ];

    var targetUL = document.querySelector(".listUL");
    var str = '';

    for(var store of arr){

        var storeStr = JSON.stringify(store);

        str += "<li onclick='show(" + storeStr + ")'>" + store.title + "</li>";

    }
    targetUL.innerHTML = str;

    var targetMarker;
    var targetInfo;

    function show(store) {

        if(targetMarker) {
            targetMarker.setMap(null);
        }
        if(targetInfo){
            targetInfo.close();
        }
        targetMarker = new daum.maps.Marker({
            position: new daum.maps.LatLng(store.lat, store.lng),
            map: map
        });
        targetInfo = new daum.maps.InfoWindow({
            position: new daum.maps.LatLng(store.lat, store.lng),
            content: store.title // 인포윈도우에 표시할 내용
        });
        targetInfo.open(map, targetMarker);

    }

    var currentMarker;
    getLocation();

    function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.watchPosition(showPosition);
        }
    }
    function showPosition(position) {
        currentMarker = new daum.maps.Marker({
            position: new daum.maps.LatLng(position.coords.latitude, position.coords.longitude),
            map: map
        });
    }



</script>


</body>
</html>